This is a great feature idea that would massively boost personalization, user control, and satisfactionâ€”especially for long-term adherence to the nutrition plan. Below is a revised and structured prompt you can copy/paste into AI Studio or Replit to implement this into your app using Supabase + an external or internal food catalog system:

â¸»

ğŸ“¥ Prompt to Implement a Swappable Food Catalog System for the Meal Planner

â¸»

Objective:
Now that the Meal Planner widget is created and functional (and can generate meal plans from onboarding), I want to add a dynamic food catalog and swap system that allows users to substitute foods in their plan. This should be built in a modular, scalable way and integrate directly into the meal plan UI.

â¸»

ğŸ”§ Functional Requirements:
	1.	Food Catalog (Organized by Macronutrient):
Build or connect to a database/API containing categorized foods, divided by primary macronutrient type:
	â€¢	Protein â†’ chicken, ground turkey, salmon, tofu, eggs, cottage cheese, steak, protein powder, etc.
	â€¢	Carbohydrates â†’ brown rice, oats, sweet potatoes, fruits, quinoa, bread, pasta, etc.
	â€¢	Fats â†’ avocado, olive oil, nuts, seeds, nut butters, whole eggs, etc.
Each food item should include:
	â€¢	Name
	â€¢	Macronutrient breakdown (protein, carbs, fat)
	â€¢	Calories
	â€¢	Serving size (e.g., 100g, 1 cup)
	â€¢	Optional: brand, allergens, tags (e.g., gluten-free, dairy-free)

â¸»

	2.	Data Source Options (choose best strategy or combine):
	â€¢	Option A (Fast): Connect to an external food database API like:
	â€¢	USDA FoodData Central (free, comprehensive)
	â€¢	Edamam
	â€¢	Spoonacular
	â€¢	Nutritionix
Sync relevant food items by macronutrient and store them in Supabase for quick access.
	â€¢	Option B (Custom): Build our own curated food catalog and store it in Supabase. Start with 50â€“100 commonly used foods per macro category, and scale later.

â¸»

	3.	Swap Mechanism:
	â€¢	In the Meal Planner, allow users to tap on a meal (e.g., â€œChicken + Riceâ€) â†’ select a food item (e.g., chicken) â†’ trigger â€œSwap Foodâ€ modal.
	â€¢	Show filtered list of macro-aligned alternatives (e.g., proteins).
	â€¢	Show visual macros side-by-side:

Chicken Breast (100g): 165 kcal Â· 31g P Â· 3.6g F Â· 0g C  
Ground Turkey (100g): 200 kcal Â· 28g P Â· 10g F Â· 0g C


	â€¢	When a swap is selected:
	â€¢	Auto-update the meal plan with new macros
	â€¢	Sync this change to the userâ€™s log and quick add list
	â€¢	Optional: Store this preference for future plans

â¸»

	4.	Integration with Logging + Quick Add:
	â€¢	If a user swaps a food â†’ that new food should also appear in:
	â€¢	â€œTodayâ€™s Logâ€
	â€¢	â€œQuick Addâ€ suggestions
	â€¢	â€œFavoritesâ€ if the user stars it

â¸»

	5.	UI/UX Features:
	â€¢	â€œSuggested Swapsâ€ button next to each food in the Meal Plan
	â€¢	Filters for dietary needs (vegan, low-fat, low-carb, dairy-free, gluten-free)
	â€¢	Option to Favorite or Blacklist certain foods
	â€¢	â€œView Macrosâ€ toggle on swap screen
	â€¢	Optional: Add image previews of foods (pull from API or static assets)

â¸»

	6.	Backend Notes (Supabase):
	â€¢	Create a food_catalog table with:
	â€¢	id, name, category (protein/carbs/fats), calories, protein, carbs, fats, serving_size, tags, is_default, image_url
	â€¢	Add a user_preferences table to store:
	â€¢	user_id, favorited_food_ids, blacklisted_food_ids, recent_swaps

â¸»

ğŸ§  Long-Term Enhancements (Optional):
	â€¢	AI-based recommendations: Suggest food swaps based on past user behavior, taste preferences, or dietary restrictions.
	â€¢	Grocery list sync: Add swapped items directly to the grocery planner.
	â€¢	â€œSmart Substitutionsâ€ engine: Adjust serving size if new food doesnâ€™t match macros 1-to-1.

â¸»

âœ… Final Outcome:
	â€¢	After onboarding generates the meal plan, the user can:
	â€¢	Tap on any food item
	â€¢	Swap it with another food from the same macro category
	â€¢	Update the meal plan and macros instantly
	â€¢	See that update reflected across the app (log, quick add, progress)

â¸»

Let me know if you want a Supabase table schema, frontend swap modal example, or code to connect to a food API.