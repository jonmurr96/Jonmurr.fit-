Excellent â€” thanks for the screenshots and context.

Youâ€™re asking for a full UI/UX + code reconstruction prompt for the Manual Meal Prep Generator, specifically to address these issues:

â¸»

âŒ Current Problems:
	1.	Cluttered UI â€“ key buttons and macros display overlap when the keyboard appears.
	2.	Bad Mobile Experience â€“ poor responsiveness; screen elements are hidden or inaccessible.
	3.	Low Usability â€“ the Browse/Search workflow isnâ€™t intuitive or efficient.
	4.	Weak Visual Hierarchy â€“ macros, search results, and actions all blend together.
	5.	Lacks modular design â€“ not scalable or dev-friendly for future improvements.

â¸»

Below is a Production-Ready Prompt (PRD-style) you can copy/paste into Replit AI, aistudio.google, or any AI dev assistant to fully rebuild this feature.

â¸»

ğŸ§  Prompt: Rebuild & Redesign the Manual Meal Prep Generator (UI + Functional Logic)

â¸»

ğŸ”§ Objective:
Rebuild the Manual Meal Prep Generator UI and underlying logic to offer a clean, mobile-optimized, intuitive interface where users can:
	â€¢	Manually build a custom meal plan by browsing or searching food items
	â€¢	Track macro totals live (Calories, Protein, Carbs, Fats)
	â€¢	Easily swap and manage food items
	â€¢	Save & sync plans with their nutrition dashboard

â¸»

ğŸ“± UI/UX Requirements:

View Name: ManualMealBuilder

â¸»

ğŸ“ Layout Structure:

Section	Description
ğŸ“Š Macro Summary Panel	Fixed top section showing live totals for Calories, Protein, Carbs, Fats. Use colored chips (Red = Protein, Blue = Carbs, Yellow = Fats). Sticky/floating to remain visible.
ğŸ” Food Search Panel	Input field with smart search (USDA API). Expandable modal. Autocomplete suggestions. Must shift UI upward when keyboard is active.
ğŸ´ Food Catalog Grid	Segmented buttons: [Protein] [Carbs] [Fats]. Grid layout with food cards showing: name, macros, serving size, â€œAddâ€ button. Scrollable section.
ğŸ“ My Plan Preview	Shows selected foods in list view with: name, quantity, macros, and â€œremoveâ€ icon.
âœ… Bottom Actions	Buttons: [Cancel], [Save Plan]. Sticky footer. Disabled until user adds food.


â¸»

âœ¨ Functional Requirements:
âœ… Macro Tracker Logic
	â€¢	Update macros instantly as foods are added/removed.
	â€¢	Caloric total = (P x 4) + (C x 4) + (F x 9)

âœ… Search Improvements
	â€¢	Use USDA FoodData Central API
	â€¢	Prioritize â€œFoundationâ€ and â€œSR Legacyâ€ results
	â€¢	Autocomplete with 5â€“10 live suggestions
	â€¢	Use debounce (200â€“300ms) to reduce API spam

âœ… Filtering Options
	â€¢	Allow category-based browsing (Protein, Carbs, Fats)
	â€¢	Allow sorting by: [Calories Asc], [Protein Desc], [A-Z]

âœ… Food Card Component
Each food item should be a modular card:

{
  name: "Chicken Breast",
  serving: "100g",
  macros: {
    calories: 165,
    protein: 31g,
    carbs: 0g,
    fat: 3.6g
  },
  source: "USDA",
  image: Optional
}


â¸»

ğŸ§  State Management:

Use React/Next.js or React Native logic (depending on platform):
	â€¢	useState for selected foods
	â€¢	useEffect to recalculate macros
	â€¢	useContext or Supabase sync for global state
	â€¢	API hooks to call USDA FoodData Central

â¸»

ğŸ§ª Validation:
	â€¢	Prevent saving an empty plan
	â€¢	Prevent duplicate foods (option to â€œincrease servingâ€ instead)
	â€¢	Validate macro numbers are correct on update

â¸»

ğŸ“¦ Supabase Tables:

-- user_meal_plans
id (uuid)
user_id (uuid)
name (string)
total_calories (int)
total_protein (int)
total_carbs (int)
total_fats (int)
foods (jsonb)
created_at

-- food_catalog (optional cache layer)
id
name
category
macros (jsonb)
usda_id


â¸»

ğŸ¨ Design Specs:
	â€¢	Dark mode support
	â€¢	Use consistent spacing (8pt grid)
	â€¢	Font: Inter or similar, 16px base size
	â€¢	Scrollable containers with max-height set to avoid keyboard overlap
	â€¢	Keyboard avoidance behavior: auto-scroll view when typing/searching

â¸»

âœ… Deliverables:
	1.	Full responsive UI layout
	2.	Live macro calculator
	3.	USDA search with accurate filtering
	4.	Food selection system with preview and delete
	5.	Sticky save/cancel buttons
	6.	Clean mobile experience (keyboard avoidance, no overlap)
	7.	Supabase integration for saving plans
	8.	Modular component structure for future extension (e.g., AI suggestions, food swapping)

â¸»

Bonus Features (Optional):
	â€¢	ğŸ”„ â€œSuggest Smart Planâ€ â€“ based on target macros
	â€¢	ğŸ” â€œAuto Swapâ€ â€“ if food not found, suggest nearest macro equivalent
	â€¢	ğŸ“ˆ Show % macro target hit (e.g., â€œYouâ€™ve hit 78% of your protein targetâ€)
	â€¢	ğŸ“· Add food by scanning nutrition label or image (future extension)

â¸»

Let me know if you want this translated into working code, or a Figma-style UI mockup description next.